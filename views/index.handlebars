<!doctype html>

<html>
{{> html-header}}

<body>
	<!-- enter the page title between the partials -->
	{{> navbar}}
		What Are You Eating?
		<!-- voice input icon in a badge -->
		<span class="badge" data-toggle="modal" data-target="#popup">
			<img src="http://uxrepo.com/download.php?img=static/icon-sets/google-material/svg/android-mic.svg" class="img-responsive" style="width:10px;">
		</span>
	{{> navbar-hack}}

	<div class="container" align="center" style="padding-top:4px;">

		<br/>

		<form id="addMealForm" role="form" method="get" action="/history">
			<!-- make pic clickable to upload "new" image -->
			<div>
				<!-- <label for="food"></label> -->
				<input type="text" id="food" placeholder="Food Item" name="food1" style="margin-bottom:5px;" onChange="update()">
				<!-- <label for="servings"></label> -->
				<input type="number" id="servings" placeholder="Servings" name="servings1" min="1">
				<!-- explain "servings" with a (?) button -->
				<input type="text" id="datepicker" placeholder="Date of Meal" name="date">
				<select id="mealtype" name="t">
					<option value="breakfast" selected>Breakfast</option>
					<option value="brunch">Brunch</option>
					<option value="lunch">Lunch</option>
					<option value="dinner">Dinner</option>
					<option value="snack">Snack</option>
				</select>
			</div>
			<!-- <span class="glyphicon glyphicon-plus-sign"></span> -->

			<div class="modal fade" id="popup-choice" {{> popup}}
				Warning
					</h4> </div> <div class="modal-body" align="center">
				In the meal you're about to add, these foods
				<br/><b id="list"></b>
				<br/>may cause you to consume excess of
				<br/><b>Fats and Sodium</b>
				<br/><br/>
				Are you sure you want to log this meal?
					</div> <div class="modal-footer">
				<input type="submit" id="submitBtn" class="btn btn-default" value="Add anyway"></input>
				<button type="button" class="btn btn-primary" data-dismiss="modal">Choose something else
			{{> popup-hack}}
		</form>

		<br/>

		<!-- <input id="quantity" style="width:25px" maxlength="2" placeholder="x">
		<h5 style="display:inline;"> servings of </h5>
		<input id="tags" placeholder="food item"> -->

		{{> take-a-pic}} <!-- overlay (code in the corresponding partial) -->

		<!-- <h5 style="display:inline;">On </h5>
		<h5 style="display:inline;"> for </h5> -->

		<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#popup-choice">Add Meal</button>

		<br/><br/>

		<!-- code for various popups follows; it mave be moved anywhere (maybe) -->

		<div class="modal fade" id="popup" {{> popup}}
			Wizard of Oz
				</h4> </div> <div class="modal-body" align="center">
			Imagine you could simply "tell" your phone what you're eating, making the task of logging meals much simpler :)
				</div> <div class="modal-footer">
			<button type="button" class="btn" data-dismiss="modal">Dismiss
		{{> popup-hack}}

		<div class="modal fade" id="soon" {{> popup}}
			Coming soon...
				</h4> </div> <div class="modal-body" align="center">
			You will be able to upload an image/take one directly (depending on what is supported by web browsers).
				</div> <div class="modal-footer">
			<button type="button" class="btn" data-dismiss="modal">Dismiss
		{{> popup-hack}}

	</div>

	{{> icon-panel}}

	<!-- stylesheet for datepicker; dunno if this should be somewhere else, like in header, or if it conflicts w/ anything -->
	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

	<script src="js/jquery-1.11.0.js"></script>
	<script src="js/bootstrap.js"></script>

	<!-- from website for datepicker -->
	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

	<!-- our custom scripts that are pretty long or used in multiple places -->
	<script src="js/nutrition-check.js"></script>

	<!-- datepicker script -->
	<script>
		$(function() {
			$( "#datepicker" ).datepicker();
		});
		function update() {
			console.log(document.forms["addMealForm"]["food1"].value);
			if(document.forms["addMealForm"]["food1"].value == "" || document.forms["addMealForm"]["food1"].value == null){
				document.getElementById("list").innerHTML="No food entered...";
			} else {
				document.getElementById("list").innerHTML=document.forms["addMealForm"]["food1"].value;
			}
		}
	</script>

	<script>
		document.getElementById("home-iconbar").setAttribute("class","btn btn-secondary navbar-btn");
		document.getElementById("home-link").setAttribute("href","#");
	</script>
</body>
</html>
